<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <div id="app">
      <div class="card" :class="{'card__occupied': bathrooms[0].isOccupied}">
        phone-box1
      </div>
    </div>

    <script>
      new Vue({
        el: "#app",
        data: {
          bathrooms: null,
          intervalId: "",
        },
        methods: {
          getStatus() {

            axios
              

              //　ローカルテスト用
              .get("http://localhost:3000/get")
              .then(response => {
                this.bathrooms = Object.assign(
                  {},
                  this.bathrooms,
                  response.data
                );
              })
              .catch(error => {
                this.error = `error : ${error}`;
              });
          }
        },
        mounted() {
          let _this = this;
          this.intervalId = setInterval(function() {
            _this.getStatus();
          }, 1000);
        },
        beforeDestroy() {
          clearInterval(this.intervalId);
        }
      });
    </script>

    <style>
      .card {
        border: 1px solid #e3e3e3;
        border-radius: 5px;
        padding: 20px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
      }
      .card__occupied {
        background-color: red;
      }
    </style>
  </body>
</html>
